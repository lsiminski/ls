/**
*	Snowbridge Parallax
*	Version: 1.0.2
*	URL: @ThemeMountain
*	Description: Parallax plugin
*	Requires: jQuery 1.10+
*	Author: ThemeMountain
*	Copyright: Copyright 2013 ThemeMountain
*	License: Attribution-NonCommercial 3.0 (http://creativecommons.org/licenses/by-nc/3.0/)
*/
!function(a,t,e,i){"use strict";function n(t,i){var n=a('<div class="tm-parallax" />').prependTo(a(t));v&&n.css({height:""}).addClass("tmp-mobile");var r=a('<div class="tm-loader"><div id="circle" /></div>');r.appendTo(n);var o=t.data("src"),l=o.substr(o.lastIndexOf("."));(e.isRetinaDevice()&&i.retinaSupport||e.isRetinaDevice()&&t.is("[data-retina]"))&&(!v&&!i.retinaSupportMobile||v&&i.retinaSupportMobile)&&(o.match(/\.(svg)/i)||(o=t.data("retina")?t.data("retina"):t.data("src").replace(l,i.retinaSuffix+l))),a('<img class="tmp-media"/>').attr("src",o).one("load",function(){a(this).attr("src",o).appendTo(n),n.find(".tm-loader").remove(),s(t,i)}).on("error",function(){console.log("Error src:"+o)})}function s(t,i){var n=t.find(".tmp-media");n.data("refW",n.width()).data("refH",n.height()),n.css({opacity:0}),l(t,i),d(t,i),f&&c(t)?n.css({visibility:"visible",transitionProperty:"opacity",transitionDuration:"1000ms",opacity:1}):n.css({visibility:"visible"}).animate({opacity:1}),a(e).on("resize",function(){l(t,i),o(t,i)}),a(e).on("scroll",function(){o(t,i)}),i.onLoaded&&i.onLoaded()}var r=function(t,e){var i=a.extend({},a.fn.snowBridge.tmpOpts,e),s=a(t),r=i.scaleContainer?i.scaleUnder:s.width();s.data("animating",!1).data("setup",!1).data("refW",r).data("refH",s.height()),i.fadeInOut=s.is('[data-fade-in-out="false"]')?!1:i.fadeInOut,i.scaleContainer=s.is('[data-scale="false"]')?!1:i.scaleContainer,i.scaleUnder=s.data("scale-under")?s.data("scale-under"):i.scaleUnder,i.scaleMinHeight=s.data("scale-min-height")?s.data("scale-min-height"):i.scaleMinHeight,l(s,i),i.fullscreen&&(i.scaleContainer=!0),i.parallaxFactor>1&&(i.parallaxFactor=1),s.data("setup",!0),n(s,i)},o=function(a,t){a.data("animating")||(e.requestAnimationFrame(function(){d(a,t)}),a.data("animating",!0))},l=function(t,i){var n=a(e).width(),s=a(e).height(),r=t.data("refW"),o=t.data("refH"),l=i.fullscreen?n/s:r/o,d=i.fullscreen?s:n/l>o?o:n/l;if((i.fullscreen||i.scaleContainer)&&(t.css({width:n+"px",height:Math.round(d)>i.scaleMinHeight?Math.round(d)+"px":i.scaleMinHeight+"px"}),d=Math.round(d)>i.scaleMinHeight?d:i.scaleMinHeight),!t.data("setup"))return!1;var c=t.find(".tmp-media"),u=c.data("refW"),h=c.data("refH"),p=u/h,f=i.fullscreen?s+s*i.parallaxFactor:i.scaleContainer?d+d*i.parallaxFactor:o+o*i.parallaxFactor,m=f*p,g=s+d,b=v?-((f-d)/2):0;c.css(i.fullscreen||i.scaleContainer?m>n?{width:Math.round(m)+"px",height:Math.round(f)+"px",left:-Math.round((m-n)/2)+"px",top:b+"px"}:{width:n+"px",height:Math.round(n/p)+"px",left:0,top:b+"px"}:m>n?{width:Math.round(f*p)+"px",height:Math.round(f)+"px",left:-Math.round((f*p-n)/2)+"px",top:b+"px"}:{width:n+"px",height:Math.round(n/p)+"px",left:0,top:b+"px"}),t.data("scrollDistContainer",g)},d=function(t,i){var n=t.find(".tmp-media");if(c(t)){if(v)return!1;var s=t.height()+t.offset().top-a(e).scrollTop(),r=t.offset().top-a(e).scrollTop(),o=0-n.height()/2,l=o*(s/t.data("scrollDistContainer"))*i.parallaxFactor;if(n.css(f?{transform:"translate3d( 0px, "+l+"px, 0px)",visibility:"visible"}:{top:l+"px",visibility:"visible"}),i.fadeInOut){var d,u=a(e).height(),h=i.fadeThreshold>1?.5*t.height():t.height()*i.fadeThreshold;r>h||(d=Math.abs(s/h)>1?1:Math.abs(s/h)),r>u||u-h>r||(d=(u-r)/h>1?1:(u-r)/h),n.parent().css({opacity:(Math.ceil(100*d)/100).toFixed(2)})}}else v||n.css({visibility:"hidden"});t.data("animating",!1)},c=function(t){var i=a(e).scrollTop(),n=i+a(e).height(),s=t.offset().top,r=s+t.outerHeight();return n>=s&&r>=i};e.isRetinaDevice=function(){var a="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return this.devicePixelRatio>1||this.matchMedia&&this.matchMedia(a).matches?!0:!1};var u,h=t.body||t.documentElement,p=h.style,f=p.transition!==i||p.WebkitTransition!==i||p.MozTransition!==i||p.MsTransition!==i||p.OTransition!==i,m=["WebkitTransform","MozTransform","OTransform","msTransform"];for(var g in m)p[m[g]]!==i&&(u="-"+m[g].replace("Transform","").toLowerCase());var v=!1;(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))&&(v=!0),function(){for(var a=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!e.requestAnimationFrame;++i)e.requestAnimationFrame=e[t[i]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[t[i]+"CancelAnimationFrame"]||e[t[i]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-a)),s=e.setTimeout(function(){t(i+n)},n);return a=i+n,s}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(a){clearTimeout(a)})}(),a.fn.snowBridge=function(t){return this.each(function(){var e=a(this);if(!e.data("snowBridge")){var i=new r(this,t);e.data("snowBridge",i)}})},a.fn.snowBridge.tmpOpts={fullscreen:!1,parallaxFactor:.7,fadeInOut:!0,fadeThreshold:.5,scaleContainer:!0,scaleUnder:1140,scaleMinHeight:250,retinaSupport:!0,retinaSupportMobile:!1,retinaSuffix:"@2x",onLoaded:null}}(jQuery,document,window);